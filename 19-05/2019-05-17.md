# _search 结果字段含义

- `took` - Elasticsearch执行搜索的时间（以毫秒为单位）
- `timed_out` - 告诉我们搜索是否超时
- `_shards` - 告诉我们搜索了多少个分片，以及搜索成功/失败分片的数量
- `hits` - 搜索结果
- `hits.total` - 包含与我们的搜索条件匹配的文档总数的信息的对象
  - `hits.total.value`- 总命中数的值（必须在上下文中解释`hits.total.relation`）。
  - `hits.total.relation`- 是否`hits.total.value`是确切的命中计数，在这种情况下它等于`"eq"`或总命中数的下限（大于或等于），在这种情况下它等于`gte`。
- `hits.hits` - 实际的搜索结果数组（默认为前10个文档）
- `hits.sort` - 对结果进行排序键（如果按分数排序则丢失）
- `hits._score`并`max_score`- 暂时忽略这些字段

精度`hits.total`由请求参数控制`track_total_hits`，当设置为true时，请求将准确跟踪总命中（`"relation": "eq"`）。默认为`10,000` 这意味着总命中数被准确地跟踪到`10,000`文档。您可以通过`track_total_hits`显式设置为true 来强制进行准确计数。有关详细信息，请参阅[请求正文](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-track-total-hits.html)文档。



# elasticsearch api

```
http://localhost:9201/csdn/articles/_search
```

```json
{
  "query": { "match_all": {} },
  "from": 10,
  "size": 3,
  "_source": ["date","url"]
 
}
```

```json
{
  "query": { "match": {"url":"https://blog.csdn.net/weixin_40543283/article/details/89430133"} },
  "from": 0,
  "size": 3,
  "_source": ["date","url"]
 
}
```



# 其它

## ubuntu bash 定时脚本

### cron安装

- 启动 cron 服务
  通常 ubuntu 下自带 cron，如果没有也可以通过以下命令进行安装：
- `sudo apt-get install cron`
- 若已经安装，输入以下命令判断 cron 服务是否启动：
- `pgrep cron`
- 如果有 pid （一串数字）输出则说明 cron 服务已经启动，没有任何输出说明需要手动启动 cron 服务。 
  启动 cron 服务：
- `systemctl start cron`

### cron使用

- <u>cron 的所有任务计划都记录在 crontab 任务计划文件中，通过 crontab 命令对该任务文件进行管理。</u>

- 参数 说明 
  -u user指定用户 
  -e 编辑某个用户的计划任务文件，若不指定用户，默认编辑当前用户的计划任务文件 
  -l 显示某个用户的计划任务文件，若不指定用户，默认显示当前用户的计划任务文件 
  -r 删除某个用户的计划任务文件，若不指定用户，默认删除当前用户的计划任务文件 

  -i 在删除之前推送确认提示 

  ```
  m    h    dom  mon  dow   command
  0-59 0-23 1-31 1-12 0-7   command
  ```

  

  ```
  使用 run-parts 可以运行指定目录下所有的脚本（注意脚本必须加上 “#!/bin/bash”，否则 run-parts 会调用失败）.
  m h dom mon dow   command
  30 7 * * * run-parts /home   #每天7：30运行 /home 目录下的所有脚本
  ```

  

- 修改crontab默认编辑器为vi或者其他的编辑器。


- `select-editor`

